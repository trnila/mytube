var analyser,canvas,canvasContext;window.addEventListener("load",init,!1);function init(){setupWebAudio();setupDrawingCanvas();draw()}function setupWebAudio(){var a=document.getElementById("music"),b=new webkitAudioContext;analyser=b.createAnalyser();b.createMediaElementSource(a).connect(analyser);analyser.connect(b.destination);a.play()}
function draw(){webkitRequestAnimationFrame(draw);var a=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(a);canvasContext.clearRect(0,0,canvas.width,canvas.height);for(var b=0;b<a.length;b++)canvasContext.fillRect(b,canvas.height-a[b],10,canvas.height),b+=10}
function setupDrawingCanvas(){canvas=document.getElementsByTagName("canvas")[0];canvas.width=1024;canvas.height=255;console.log(canvas);canvasContext=canvas.getContext("2d");var a=canvasContext.createLinearGradient(0,0,0,canvas.height);a.addColorStop(0,"red");a.addColorStop(0.5,"yellow");a.addColorStop(1,"green");canvasContext.fillStyle=a};
