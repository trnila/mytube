/*
 MIT
*/
(function(a,e){if("function"!=typeof a)return console.error("nette.ajax.js: jQuery is missing, load it please");a.nette=new (a.extend(function(){var c={self:this,initialized:!1,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var b=!0,d=Array.prototype.slice.call(arguments),f=d.shift(),g="string"==typeof f?f:f.name,i="object"==typeof f?f.off||{}:{};d.push(c.self);a.each(c.on[g],function(f,g){if(g===e||-1!==a.inArray(f,i))return!0;var m=
g.apply(c.contexts[f],d);return b=m===e||m});return b},requestHandler:function(b){c.self.ajax({},this,b)},ext:function(b,d,f){for(;!f;)f="ext_"+Math.random(),c.contexts[f]&&(f=e);a.each(b,function(b,a){c.on[b][f]=a});c.contexts[f]=a.extend(d?d:{},{name:function(){return f},ext:function(b,a){var d=c.contexts[b];if(!d&&a)throw"Extension '"+this.name()+"' depends on disabled extension '"+b+"'.";return d}})}};this.ext=function(b,d,f){if("object"==typeof b)c.ext(b,d);else{if(d===e)return c.contexts[b];
if(d){if("string"==typeof b&&c.contexts[b]!==e)throw"Cannot override already registered nette-ajax extension.";c.ext(d,f,b)}else a.each("init load before start success complete error".split(" "),function(a,d){c.on[d][b]=e}),c.contexts[b]=e}return this};this.init=function(b,a){if(c.initialized)throw"Cannot initialize nette-ajax twice.";if("function"==typeof b)this.ext("init",null),this.ext("init",{load:b},a);else if("object"==typeof b)this.ext("init",null),this.ext("init",b,a);else if(b!==e)throw"Argument of init() can be function or function-hash only.";
c.initialized=!0;c.fire("init");this.load();return this};this.load=function(){c.fire("load",c.requestHandler);return this};this.ajax=function(b,d,f){if(!b.nette&&d&&f){var g=a(d),i,f=b.nette={e:f,ui:d,el:g,isForm:g.is("form"),isSubmit:g.is("input[type=submit]"),isImage:g.is("input[type=image]"),form:null};f.isSubmit||f.isImage?f.form=f.el.closest("form"):f.isForm&&(f.form=f.el);b.url||(b.url=f.form?f.form.attr("action"):d.href);b.type||(b.type=f.form?f.form.attr("method"):"get");g.is("[data-ajax-off]")&&
(b.off=g.data("ajaxOff"),"string"==typeof b.off&&(b.off=[b.off]))}c.fire({name:"prepare",off:b.off||{}},b);b.prepare&&b.prepare(b);i=b.beforeSend;b.beforeSend=function(b,a){if(i){var d=i(b,a);if(d!==e&&!d)return d}return c.fire({name:"before",off:a.off||{}},b,a)};if(d=a.ajax(b))d.done(function(a,d,f){c.fire({name:"success",off:b.off||{}},a,d,f)}).fail(function(a,d,f){c.fire({name:"error",off:b.off||{}},a,d,f)}).always(function(a,d){c.fire({name:"complete",off:b.off||{}},a,d)}),c.fire({name:"start",
off:b.off||{}},d,b),b.start&&b.start(d,b);return d}},a.nette?a.nette:{}));a.fn.netteAjax=function(c,b){return a.nette.ajax(b||{},this[0],c)};a.nette.ext("validation",{before:function(c,b){if(b.nette)var d=b.nette;else return!0;var f=d.e,g=a.extend({keys:!0,url:!0,form:!0},b.validate||function(){if(d.el.is("[data-ajax-validate]")){var b=d.el.data("ajaxValidate");if(!1===b)return{keys:!1,url:!1,form:!1};if("object"==typeof b)return b}}()||{}),i=!1;d.el.attr("data-ajax-pass")!==e&&(i=d.el.data("ajaxPass"),
i="bool"==typeof i?i:!0);if(g.keys){var k=f.button||f.ctrlKey||f.shiftKey||f.altKey||f.metaKey;if(d.form){if(k&&d.isSubmit)return this.explicitNoAjax=!0,!1;if(d.isForm&&this.explicitNoAjax)return this.explicitNoAjax=!1}else if(k)return!1}if(g.form&&d.form&&!((d.isSubmit||d.isImage)&&d.el.attr("formnovalidate")!==e)&&d.form.get(0).onsubmit&&!d.form.get(0).onsubmit())return f.stopImmediatePropagation(),f.preventDefault(),!1;if(g.url&&/:|^#/.test(d.form?b.url:d.el.attr("href")))return!1;i||(f.stopPropagation(),
f.preventDefault());return!0}},{explicitNoAjax:!1});a.nette.ext("state",{prepare:function(c){this.state&&("string"==typeof c.data?c.data+="&"+a.param(this.state):"object"==typeof c.data?c.data=a.extend(c.data||{},this.state):c.data||(c.data=this.state))},success:function(a){a.state&&(this.state=a.state)}},{state:null});a.nette.ext("forms",{success:function(a){var b;if(window.Nette&&a.snippets&&(b=this.ext("snippets")))for(var d in a.snippets)b.getElement(d).find("form").each(function(){window.Nette.initForm(this)})},
prepare:function(c){var b=c.nette;if(b&&b.form){var d=b.e,f=c.data||{},e={};if(b.isSubmit)e[b.el.attr("name")]=b.el.val()||"";else if(b.isImage){var i=b.el.offset(),k=b.el.attr("name"),d=[Math.max(0,d.pageX-i.left),Math.max(0,d.pageY-i.top)];-1!==k.indexOf("[",0)?e[k]=d:(e[k+".x"]=d[0],e[k+".y"]=d[1])}"string"!=typeof f&&(f=a.param(f));e=a.param(e);c.data=b.form.serialize()+(e?"&"+e:"")+"&"+f}}});a.nette.ext("snippets",{success:function(a){if(a.snippets)for(var b in a.snippets)this.updateSnippet(b,
a.snippets[b])}},{updateSnippet:function(a,b,d){a=this.getElement(a);"TITLE"==a.eq(0).tagName?document.title=b:this.applySnippet(a,b,d)},getElement:function(c){return a("#"+this.escapeSelector(c))},applySnippet:function(a,b,d){!d&&a.is("[data-ajax-append]")?a.append(b):a.html(b)},escapeSelector:function(a){return a.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}});a.nette.ext("redirect",{success:function(a){if(a.redirect)return window.location.href=a.redirect,!1}});a.nette.ext("unique",
{start:function(a){this.xhr&&this.xhr.abort();this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});a.nette.ext("abort",{init:function(){a("body").keydown(a.proxy(function(a){this.xhr&&(27==a.keyCode&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey)&&this.xhr.abort()},this))},start:function(a){this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});a.nette.ext("init",{load:function(c){a(this.linkSelector).off("click.nette",c).on("click.nette",c);var b=a(this.formSelector);b.off("submit.nette",
c).on("submit.nette",c);b.off("click.nette",":image",c).on("click.nette",":image",c);b.off("click.nette",":submit",c).on("click.nette",":submit",c);var d=this.buttonSelector;a(d).each(function(){a(this).closest("form").off("click.nette",d,c).on("click.nette",d,c)})},success:function(){a.nette.load()}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], input.ajax[type="image"]'})})(window.jQuery);(function(a){a.nette.ext("diagnostics.dumps",{success:function(e){if(e.netteDumps&&0!=e.netteDumps.length){var c=this.getPanel(),b=a("<div>");a(this.getTitle(++this.counter)).appendTo(c);a.each(e.netteDumps,function(d,c){c.title&&a("<h2>",{text:c.title}).appendTo(b);var e=a("<table>").appendTo(b),d=0;a.each(c.dump,function(b,c){a("<th>");e.append(a("<tr>",{"class":d++%2?"nette-alt":"",html:"<th>"+b+"</th><td>"+c+"</td>"}))})});b.children().appendTo(c);this.notify()}}},{counter:0,getTitle:function(a){return"<h2>Ajax request #"+
a+"</h2>"},getTab:function(){this.tab||(this.tab=a("[rel=Nette-Diagnostics-DefaultBarPanel-4]"));return this.tab},getPanel:function(){this.panel||(this.panel=a("#nette-debug-panel-Nette-Diagnostics-DefaultBarPanel-4 .nette-DumpPanel"));return this.panel},notify:function(){this.notified||(a("<strong>",{text:" [ajax!]",css:{fontWeight:"bold"}}).appendTo(this.getTab()),this.notified=!0)}})})(jQuery);(function(a){a.nette.ext("scrollTo",{success:function(a){var c=this.ext("snippets",!0);if(a.snippets)for(var b in a.snippets)if(a=c.getElement(b),"TITLE"!=a.eq(0).tagName){c=a.offset();scrollTo(c.left,c.top);break}}})})(jQuery);(function(a){if(window.history&&history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)){a.nette.ext("redirect",!1);var e=function(){var b=[];a('[id^="snippet--"]').each(function(){var d=a(this);b.push({id:d.attr("id"),html:d.html()})});return b},c=function(b,a,c){(a=b["handle"+a.substring(0,1).toUpperCase()+a.substring(1)])&&a.apply(b,c)};a.nette.ext("history",{init:function(){var b=this.stateExt=this.ext("state",!0),d=
this.ext("snippets");this.cache&&d&&(this.handleUI=function(b){a.each(b,function(){d.updateSnippet(this.id,this.html,!0)});a.nette.load()});history.replaceState(this.initialState={nette:!0,href:window.location.href,state:{},title:document.title,ui:e()},document.title,window.location.href);a(window).on("popstate.nette",a.proxy(function(d){var e=d.originalEvent.state||this.initialState;!window.history.ready&&(e&&e.nette)&&(this.cache&&e.ui?(c(this,"UI",[e.ui]),c(this,"title",[e.title]),c(this,"state",
[e.state])):a.nette.ajax({url:e.href,off:["history","state"]}).done(function(a){a.state&&(b.state=e)}))},this))},before:function(a,d){this.href=d.nette?d.nette.form?"get"==d.nette.form.method?d.nette.ui.action||window.location.href:null:d.nette.ui.href:null},success:function(a){var d=a.redirect||a.url;if(d){var c=RegExp("//"+window.location.host+"($|/)");("http"===d.substring(0,4)?c.test(d):1)?this.href=d:window.location.href=d}if((!a.signal||d)&&this.href&&this.href!=window.location.href)history.pushState({nette:!0,
href:this.href,state:a.state||null,title:document.title,ui:e()},document.title,this.href);this.href=null}},{href:null,cache:!0,handleTitle:function(a){document.title=a},handleState:function(a){this.stateExt.state=a}})}})(jQuery);(function(a){a.fn.editable=function(e,c){if("disable"==e)a(this).data("disabled.editable",!0);else if("enable"==e)a(this).data("disabled.editable",!1);else if("destroy"==e)a(this).unbind(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var b=a.extend({},a.fn.editable.defaults,{target:e},c),d=a.editable.types[b.type].plugin||function(){},f=a.editable.types[b.type].submit||function(){},g=a.editable.types[b.type].buttons||a.editable.types.defaults.buttons,
i=a.editable.types[b.type].content||a.editable.types.defaults.content,k=a.editable.types[b.type].element||a.editable.types.defaults.element,q=a.editable.types[b.type].reset||a.editable.types.defaults.reset,m=b.callback||function(){},r=b.onedit||function(){},s=b.onsubmit||function(){},t=b.onreset||function(){},u=b.onerror||q;b.tooltip&&a(this).attr("title",b.tooltip);b.autowidth="auto"==b.width;b.autoheight="auto"==b.height;return this.each(function(){var c=this,e=a(c).width(),v=a(c).height();a(this).data("event.editable",
b.event);a.trim(a(this).html())||a(this).html(b.placeholder);a(this).bind(b.event,function(l){if(!0!==a(this).data("disabled.editable")&&!c.editing&&!1!==r.apply(this,[b,c])){l.preventDefault();l.stopPropagation();b.tooltip&&a(c).removeAttr("title");0==a(c).width()?(b.width=e,b.height=v):("none"!=b.width&&(b.width=b.autowidth?a(c).width():b.width),"none"!=b.height&&(b.height=b.autoheight?a(c).height():b.height));a(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==b.placeholder.toLowerCase().replace(/(;|"|\/)/g,
"")&&a(this).html("");c.editing=!0;c.revert=a(c).html();a(c).html("");var h=a("<form />");b.cssclass&&("inherit"==b.cssclass?h.attr("class",a(c).attr("class")):h.attr("class",b.cssclass));b.style&&("inherit"==b.style?(h.attr("style",a(c).attr("style")),h.css("display",a(c).css("display"))):h.attr("style",b.style));var j=k.apply(h,[b,c]),n;if(b.loadurl){var p=setTimeout(function(){j.disabled=!0;i.apply(h,[b.loadtext,b,c])},100),l={};l[b.id]=c.id;a.isFunction(b.loaddata)?a.extend(l,b.loaddata.apply(c,
[c.revert,b])):a.extend(l,b.loaddata);a.ajax({type:b.loadtype,url:b.loadurl,data:l,async:!1,success:function(a){window.clearTimeout(p);n=a;j.disabled=!1}})}else b.data?(n=b.data,a.isFunction(b.data)&&(n=b.data.apply(c,[c.revert,b]))):n=c.revert;i.apply(h,[n,b,c]);j.attr("name",b.name);g.apply(h,[b,c]);a(c).append(h);d.apply(h,[b,c]);a(":input:visible:enabled:first",h).focus();b.select&&j.select();j.keydown(function(a){27==a.keyCode&&(a.preventDefault(),q.apply(h,[b,c]))});"cancel"==b.onblur?j.blur(function(){p=
setTimeout(function(){q.apply(h,[b,c])},500)}):"submit"==b.onblur?j.blur(function(){p=setTimeout(function(){h.submit()},200)}):a.isFunction(b.onblur)?j.blur(function(){b.onblur.apply(c,[j.val(),b])}):j.blur(function(){});h.submit(function(d){p&&clearTimeout(p);d.preventDefault();if(!1!==s.apply(h,[b,c])&&!1!==f.apply(h,[b,c]))if(a.isFunction(b.target))d=b.target.apply(c,[j.val(),b]),a(c).html(d),c.editing=!1,m.apply(c,[c.innerHTML,b]),a.trim(a(c).html())||a(c).html(b.placeholder);else{d={};d[b.name]=
j.val();d[b.id]=c.id;a.isFunction(b.submitdata)?a.extend(d,b.submitdata.apply(c,[c.revert,b])):a.extend(d,b.submitdata);"PUT"==b.method&&(d._method="put");a(c).html(b.indicator);var e={type:"POST",data:d,dataType:"html",url:b.target,success:function(d){"html"==e.dataType&&a(c).html(d);c.editing=!1;m.apply(c,[d,b]);a.trim(a(c).html())||a(c).html(b.placeholder)},error:function(a){u.apply(h,[b,c,a])}};a.extend(e,b.ajaxoptions);a.ajax(e)}a(c).attr("title",b.tooltip);return!1})}});this.reset=function(d){this.editing&&
!1!==t.apply(d,[b,c])&&(a(c).html(c.revert),c.editing=!1,a.trim(a(c).html())||a(c).html(b.placeholder),b.tooltip&&a(c).attr("title",b.tooltip))}})}};a.editable={types:{defaults:{element:function(){var e=a('<input type="hidden"></input>');a(this).append(e);return e},content:function(e){a(":input:first",this).val(e)},reset:function(a,c){c.reset(this)},buttons:function(e,c){var b=this;if(e.submit){if(e.submit.match(/>$/))var d=a(e.submit).click(function(){"submit"!=d.attr("type")&&b.submit()});else d=
a('<button type="submit" />'),d.html(e.submit);a(this).append(d)}if(e.cancel){if(e.cancel.match(/>$/))var f=a(e.cancel);else f=a('<button type="cancel" />'),f.html(e.cancel);a(this).append(f);a(f).click(function(){(a.isFunction(a.editable.types[e.type].reset)?a.editable.types[e.type].reset:a.editable.types.defaults.reset).apply(b,[e,c]);return!1})}}},text:{element:function(e){var c=a("<input />");"none"!=e.width&&c.attr("width",e.width);"none"!=e.height&&c.attr("height",e.height);c.attr("autocomplete",
"off");a(this).append(c);return c}},textarea:{element:function(e){var c=a("<textarea />");e.rows?c.attr("rows",e.rows):"none"!=e.height&&c.height(e.height);e.cols?c.attr("cols",e.cols):"none"!=e.width&&c.width(e.width);a(this).append(c);return c}},select:{element:function(){var e=a("<select />");a(this).append(e);return e},content:function(e,c,b){if(String==e.constructor)eval("var json = "+e);else var d=e;for(var f in d)d.hasOwnProperty(f)&&"selected"!=f&&(e=a("<option />").val(f).append(d[f]),a("select",
this).append(e));a("select",this).children().each(function(){(a(this).val()==d.selected||a(this).text()==a.trim(b.revert))&&a(this).attr("selected","selected")});if(!c.submit){var g=this;a("select",this).change(function(){g.submit()})}}}},addInputType:function(e,c){a.editable.types[e]=c}};a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},
ajaxoptions:{}}})(jQuery);(function(){function a(){webkitRequestAnimationFrame(a);var d=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(d);b.clearRect(0,0,c.width,c.height);for(var g=0;g<d.length;g++)b.fillRect(g,c.height-d[g],10,c.height),g+=10}var e,c,b;window.addEventListener("load",function(){if(d=document.getElementById("music")){var f=new webkitAudioContext;e=f.createAnalyser();f.createMediaElementSource(d).connect(e);e.connect(f.destination);d.play();c=document.getElementsByTagName("canvas")[0];c.width=1024;
c.height=255;b=c.getContext("2d");f=b.createLinearGradient(0,0,0,c.height);f.addColorStop(0,"red");f.addColorStop(0.5,"yellow");f.addColorStop(1,"green");b.fillStyle=f;a()}},!1);var d})();$(function(){$.nette.ext("history").cache=!1;$.nette.init()});
