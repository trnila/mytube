/*
 MIT
*/
(function(a,d){if("function"!=typeof a)return console.error("nette.ajax.js: jQuery is missing, load it please");a.nette=new (a.extend(function(){var c={self:this,initialized:!1,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var b=!0,e=Array.prototype.slice.call(arguments),f=e.shift(),g="string"==typeof f?f:f.name,i="object"==typeof f?f.off||{}:{};e.push(c.self);a.each(c.on[g],function(f,g){if(g===d||-1!==a.inArray(f,i))return!0;var m=
g.apply(c.contexts[f],e);return b=m===d||m});return b},requestHandler:function(b){c.self.ajax({},this,b)},ext:function(b,e,f){for(;!f;)f="ext_"+Math.random(),c.contexts[f]&&(f=d);a.each(b,function(b,a){c.on[b][f]=a});c.contexts[f]=a.extend(e?e:{},{name:function(){return f},ext:function(b,a){var e=c.contexts[b];if(!e&&a)throw"Extension '"+this.name()+"' depends on disabled extension '"+b+"'.";return e}})}};this.ext=function(b,e,f){if("object"==typeof b)c.ext(b,e);else{if(e===d)return c.contexts[b];
if(e){if("string"==typeof b&&c.contexts[b]!==d)throw"Cannot override already registered nette-ajax extension.";c.ext(e,f,b)}else a.each("init load before start success complete error".split(" "),function(a,e){c.on[e][b]=d}),c.contexts[b]=d}return this};this.init=function(b,a){if(c.initialized)throw"Cannot initialize nette-ajax twice.";if("function"==typeof b)this.ext("init",null),this.ext("init",{load:b},a);else if("object"==typeof b)this.ext("init",null),this.ext("init",b,a);else if(b!==d)throw"Argument of init() can be function or function-hash only.";
c.initialized=!0;c.fire("init");this.load();return this};this.load=function(){c.fire("load",c.requestHandler);return this};this.ajax=function(b,e,f){if(!b.nette&&e&&f){var g=a(e),i,f=b.nette={e:f,ui:e,el:g,isForm:g.is("form"),isSubmit:g.is("input[type=submit]"),isImage:g.is("input[type=image]"),form:null};f.isSubmit||f.isImage?f.form=f.el.closest("form"):f.isForm&&(f.form=f.el);b.url||(b.url=f.form?f.form.attr("action"):e.href);b.type||(b.type=f.form?f.form.attr("method"):"get");g.is("[data-ajax-off]")&&
(b.off=g.data("ajaxOff"),"string"==typeof b.off&&(b.off=[b.off]))}c.fire({name:"prepare",off:b.off||{}},b);b.prepare&&b.prepare(b);i=b.beforeSend;b.beforeSend=function(b,a){if(i){var e=i(b,a);if(e!==d&&!e)return e}return c.fire({name:"before",off:a.off||{}},b,a)};if(e=a.ajax(b))e.done(function(a,e,d){c.fire({name:"success",off:b.off||{}},a,e,d)}).fail(function(a,e,d){c.fire({name:"error",off:b.off||{}},a,e,d)}).always(function(a,e){c.fire({name:"complete",off:b.off||{}},a,e)}),c.fire({name:"start",
off:b.off||{}},e,b),b.start&&b.start(e,b);return e}},a.nette?a.nette:{}));a.fn.netteAjax=function(c,b){return a.nette.ajax(b||{},this[0],c)};a.nette.ext("validation",{before:function(c,b){if(b.nette)var e=b.nette;else return!0;var f=e.e,g=a.extend({keys:!0,url:!0,form:!0},b.validate||function(){if(e.el.is("[data-ajax-validate]")){var b=e.el.data("ajaxValidate");if(!1===b)return{keys:!1,url:!1,form:!1};if("object"==typeof b)return b}}()||{}),i=!1;e.el.attr("data-ajax-pass")!==d&&(i=e.el.data("ajaxPass"),
i="bool"==typeof i?i:!0);if(g.keys){var k=f.button||f.ctrlKey||f.shiftKey||f.altKey||f.metaKey;if(e.form){if(k&&e.isSubmit)return this.explicitNoAjax=!0,!1;if(e.isForm&&this.explicitNoAjax)return this.explicitNoAjax=!1}else if(k)return!1}if(g.form&&e.form&&!((e.isSubmit||e.isImage)&&e.el.attr("formnovalidate")!==d)&&e.form.get(0).onsubmit&&!e.form.get(0).onsubmit())return f.stopImmediatePropagation(),f.preventDefault(),!1;if(g.url&&/:|^#/.test(e.form?b.url:e.el.attr("href")))return!1;i||(f.stopPropagation(),
f.preventDefault());return!0}},{explicitNoAjax:!1});a.nette.ext("state",{prepare:function(c){this.state&&("string"==typeof c.data?c.data+="&"+a.param(this.state):"object"==typeof c.data?c.data=a.extend(c.data||{},this.state):c.data||(c.data=this.state))},success:function(a){a.state&&(this.state=a.state)}},{state:null});a.nette.ext("forms",{success:function(a){var b;if(window.Nette&&a.snippets&&(b=this.ext("snippets")))for(var e in a.snippets)b.getElement(e).find("form").each(function(){window.Nette.initForm(this)})},
prepare:function(c){var b=c.nette;if(b&&b.form){var e=b.e,d=c.data||{},g={};if(b.isSubmit)g[b.el.attr("name")]=b.el.val()||"";else if(b.isImage){var i=b.el.offset(),k=b.el.attr("name"),e=[Math.max(0,e.pageX-i.left),Math.max(0,e.pageY-i.top)];-1!==k.indexOf("[",0)?g[k]=e:(g[k+".x"]=e[0],g[k+".y"]=e[1])}"string"!=typeof d&&(d=a.param(d));g=a.param(g);c.data=b.form.serialize()+(g?"&"+g:"")+"&"+d}}});a.nette.ext("snippets",{success:function(a){if(a.snippets)for(var b in a.snippets)this.updateSnippet(b,
a.snippets[b])}},{updateSnippet:function(a,b,e){a=this.getElement(a);"TITLE"==a.eq(0).tagName?document.title=b:this.applySnippet(a,b,e)},getElement:function(c){return a("#"+this.escapeSelector(c))},applySnippet:function(a,b,e){!e&&a.is("[data-ajax-append]")?a.append(b):a.html(b)},escapeSelector:function(a){return a.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}});a.nette.ext("redirect",{success:function(a){if(a.redirect)return window.location.href=a.redirect,!1}});a.nette.ext("unique",
{start:function(a){this.xhr&&this.xhr.abort();this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});a.nette.ext("abort",{init:function(){a("body").keydown(a.proxy(function(a){this.xhr&&(27==a.keyCode&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey)&&this.xhr.abort()},this))},start:function(a){this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});a.nette.ext("init",{load:function(c){a(this.linkSelector).off("click.nette",c).on("click.nette",c);var b=a(this.formSelector);b.off("submit.nette",
c).on("submit.nette",c);b.off("click.nette",":image",c).on("click.nette",":image",c);b.off("click.nette",":submit",c).on("click.nette",":submit",c);var e=this.buttonSelector;a(e).each(function(){a(this).closest("form").off("click.nette",e,c).on("click.nette",e,c)})},success:function(){a.nette.load()}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], input.ajax[type="image"]'})})(window.jQuery);(function(a){a.nette.ext("diagnostics.dumps",{success:function(d){if(d.netteDumps&&0!=d.netteDumps.length){var c=this.getPanel(),b=a("<div>");a(this.getTitle(++this.counter)).appendTo(c);a.each(d.netteDumps,function(c,d){d.title&&a("<h2>",{text:d.title}).appendTo(b);var g=a("<table>").appendTo(b),c=0;a.each(d.dump,function(b,d){a("<th>");g.append(a("<tr>",{"class":c++%2?"nette-alt":"",html:"<th>"+b+"</th><td>"+d+"</td>"}))})});b.children().appendTo(c);this.notify()}}},{counter:0,getTitle:function(a){return"<h2>Ajax request #"+
a+"</h2>"},getTab:function(){this.tab||(this.tab=a("[rel=Nette-Diagnostics-DefaultBarPanel-4]"));return this.tab},getPanel:function(){this.panel||(this.panel=a("#nette-debug-panel-Nette-Diagnostics-DefaultBarPanel-4 .nette-DumpPanel"));return this.panel},notify:function(){this.notified||(a("<strong>",{text:" [ajax!]",css:{fontWeight:"bold"}}).appendTo(this.getTab()),this.notified=!0)}})})(jQuery);(function(a){a.nette.ext("scrollTo",{success:function(a){var c=this.ext("snippets",!0);if(a.snippets)for(var b in a.snippets)if(a=c.getElement(b),"TITLE"!=a.eq(0).tagName){c=a.offset();scrollTo(c.left,c.top);break}}})})(jQuery);(function(a){if(window.history&&history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)){a.nette.ext("redirect",!1);var d=function(){var b=[];a('[id^="snippet--"]').each(function(){var c=a(this);b.push({id:c.attr("id"),html:c.html()})});return b},c=function(a,c,d){(c=a["handle"+c.substring(0,1).toUpperCase()+c.substring(1)])&&c.apply(a,d)};a.nette.ext("history",{init:function(){var b=this.stateExt=this.ext("state",!0),e=
this.ext("snippets");this.cache&&e&&(this.handleUI=function(b){a.each(b,function(){e.updateSnippet(this.id,this.html,!0)});a.nette.load()});history.replaceState(this.initialState={nette:!0,href:window.location.href,state:{},title:document.title,ui:d()},document.title,window.location.href);a(window).on("popstate.nette",a.proxy(function(e){var d=e.originalEvent.state||this.initialState;!window.history.ready&&(d&&d.nette)&&(this.cache&&d.ui?(c(this,"UI",[d.ui]),c(this,"title",[d.title]),c(this,"state",
[d.state])):a.nette.ajax({url:d.href,off:["history","state"]}).done(function(a){a.state&&(b.state=d)}))},this))},before:function(a,c){this.href=c.nette?c.nette.form?"get"==c.nette.form.method?c.nette.ui.action||window.location.href:null:c.nette.ui.href:null},success:function(a){var c=a.redirect||a.url;if(c){var f=RegExp("//"+window.location.host+"($|/)");("http"===c.substring(0,4)?f.test(c):1)?this.href=c:window.location.href=c}if((!a.signal||c)&&this.href&&this.href!=window.location.href)history.pushState({nette:!0,
href:this.href,state:a.state||null,title:document.title,ui:d()},document.title,this.href);this.href=null}},{href:null,cache:!0,handleTitle:function(a){document.title=a},handleState:function(a){this.stateExt.state=a}})}})(jQuery);(function(a){a.fn.editable=function(d,c){if("disable"==d)a(this).data("disabled.editable",!0);else if("enable"==d)a(this).data("disabled.editable",!1);else if("destroy"==d)a(this).unbind(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var b=a.extend({},a.fn.editable.defaults,{target:d},c),e=a.editable.types[b.type].plugin||function(){},f=a.editable.types[b.type].submit||function(){},g=a.editable.types[b.type].buttons||a.editable.types.defaults.buttons,
i=a.editable.types[b.type].content||a.editable.types.defaults.content,k=a.editable.types[b.type].element||a.editable.types.defaults.element,q=a.editable.types[b.type].reset||a.editable.types.defaults.reset,m=b.callback||function(){},r=b.onedit||function(){},s=b.onsubmit||function(){},t=b.onreset||function(){},u=b.onerror||q;b.tooltip&&a(this).attr("title",b.tooltip);b.autowidth="auto"==b.width;b.autoheight="auto"==b.height;return this.each(function(){var c=this,d=a(c).width(),v=a(c).height();a(this).data("event.editable",
b.event);a.trim(a(this).html())||a(this).html(b.placeholder);a(this).bind(b.event,function(l){if(!0!==a(this).data("disabled.editable")&&!c.editing&&!1!==r.apply(this,[b,c])){l.preventDefault();l.stopPropagation();b.tooltip&&a(c).removeAttr("title");0==a(c).width()?(b.width=d,b.height=v):("none"!=b.width&&(b.width=b.autowidth?a(c).width():b.width),"none"!=b.height&&(b.height=b.autoheight?a(c).height():b.height));a(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==b.placeholder.toLowerCase().replace(/(;|"|\/)/g,
"")&&a(this).html("");c.editing=!0;c.revert=a(c).html();a(c).html("");var h=a("<form />");b.cssclass&&("inherit"==b.cssclass?h.attr("class",a(c).attr("class")):h.attr("class",b.cssclass));b.style&&("inherit"==b.style?(h.attr("style",a(c).attr("style")),h.css("display",a(c).css("display"))):h.attr("style",b.style));var j=k.apply(h,[b,c]),n;if(b.loadurl){var p=setTimeout(function(){j.disabled=!0;i.apply(h,[b.loadtext,b,c])},100),l={};l[b.id]=c.id;a.isFunction(b.loaddata)?a.extend(l,b.loaddata.apply(c,
[c.revert,b])):a.extend(l,b.loaddata);a.ajax({type:b.loadtype,url:b.loadurl,data:l,async:!1,success:function(a){window.clearTimeout(p);n=a;j.disabled=!1}})}else b.data?(n=b.data,a.isFunction(b.data)&&(n=b.data.apply(c,[c.revert,b]))):n=c.revert;i.apply(h,[n,b,c]);j.attr("name",b.name);g.apply(h,[b,c]);a(c).append(h);e.apply(h,[b,c]);a(":input:visible:enabled:first",h).focus();b.select&&j.select();j.keydown(function(a){27==a.keyCode&&(a.preventDefault(),q.apply(h,[b,c]))});"cancel"==b.onblur?j.blur(function(){p=
setTimeout(function(){q.apply(h,[b,c])},500)}):"submit"==b.onblur?j.blur(function(){p=setTimeout(function(){h.submit()},200)}):a.isFunction(b.onblur)?j.blur(function(){b.onblur.apply(c,[j.val(),b])}):j.blur(function(){});h.submit(function(d){p&&clearTimeout(p);d.preventDefault();if(!1!==s.apply(h,[b,c])&&!1!==f.apply(h,[b,c]))if(a.isFunction(b.target))d=b.target.apply(c,[j.val(),b]),a(c).html(d),c.editing=!1,m.apply(c,[c.innerHTML,b]),a.trim(a(c).html())||a(c).html(b.placeholder);else{d={};d[b.name]=
j.val();d[b.id]=c.id;a.isFunction(b.submitdata)?a.extend(d,b.submitdata.apply(c,[c.revert,b])):a.extend(d,b.submitdata);"PUT"==b.method&&(d._method="put");a(c).html(b.indicator);var e={type:"POST",data:d,dataType:"html",url:b.target,success:function(d){"html"==e.dataType&&a(c).html(d);c.editing=!1;m.apply(c,[d,b]);a.trim(a(c).html())||a(c).html(b.placeholder)},error:function(a){u.apply(h,[b,c,a])}};a.extend(e,b.ajaxoptions);a.ajax(e)}a(c).attr("title",b.tooltip);return!1})}});this.reset=function(d){this.editing&&
!1!==t.apply(d,[b,c])&&(a(c).html(c.revert),c.editing=!1,a.trim(a(c).html())||a(c).html(b.placeholder),b.tooltip&&a(c).attr("title",b.tooltip))}})}};a.editable={types:{defaults:{element:function(){var d=a('<input type="hidden"></input>');a(this).append(d);return d},content:function(d){a(":input:first",this).val(d)},reset:function(a,c){c.reset(this)},buttons:function(d,c){var b=this;if(d.submit){if(d.submit.match(/>$/))var e=a(d.submit).click(function(){"submit"!=e.attr("type")&&b.submit()});else e=
a('<button type="submit" />'),e.html(d.submit);a(this).append(e)}if(d.cancel){if(d.cancel.match(/>$/))var f=a(d.cancel);else f=a('<button type="cancel" />'),f.html(d.cancel);a(this).append(f);a(f).click(function(){(a.isFunction(a.editable.types[d.type].reset)?a.editable.types[d.type].reset:a.editable.types.defaults.reset).apply(b,[d,c]);return!1})}}},text:{element:function(d){var c=a("<input />");"none"!=d.width&&c.attr("width",d.width);"none"!=d.height&&c.attr("height",d.height);c.attr("autocomplete",
"off");a(this).append(c);return c}},textarea:{element:function(d){var c=a("<textarea />");d.rows?c.attr("rows",d.rows):"none"!=d.height&&c.height(d.height);d.cols?c.attr("cols",d.cols):"none"!=d.width&&c.width(d.width);a(this).append(c);return c}},select:{element:function(){var d=a("<select />");a(this).append(d);return d},content:function(d,c,b){if(String==d.constructor)eval("var json = "+d);else var e=d;for(var f in e)e.hasOwnProperty(f)&&"selected"!=f&&(d=a("<option />").val(f).append(e[f]),a("select",
this).append(d));a("select",this).children().each(function(){(a(this).val()==e.selected||a(this).text()==a.trim(b.revert))&&a(this).attr("selected","selected")});if(!c.submit){var g=this;a("select",this).change(function(){g.submit()})}}}},addInputType:function(d,c){a.editable.types[d]=c}};a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},
ajaxoptions:{}}})(jQuery);(function(){function a(){webkitRequestAnimationFrame(a);var e=new Uint8Array(d.frequencyBinCount);d.getByteFrequencyData(e);b.clearRect(0,0,c.width,c.height);for(var g=0;g<e.length;g++)b.fillRect(g,c.height-e[g],10,c.height),g+=10}var d,c,b;window.addEventListener("load",function(){if(e=document.getElementById("music")){var f=new webkitAudioContext;d=f.createAnalyser();f.createMediaElementSource(e).connect(d);d.connect(f.destination);e.play();c=document.getElementsByTagName("canvas")[0];c.width=1024;
c.height=255;b=c.getContext("2d");f=b.createLinearGradient(0,0,0,c.height);f.addColorStop(0,"red");f.addColorStop(0.5,"yellow");f.addColorStop(1,"green");b.fillStyle=f;a()}},!1);var e})();$.editable.types.text.element=function(a){var d=$('<input type="text" />');"none"!=a.width&&d.attr("width",a.width);"none"!=a.height&&d.attr("height",a.height);d.attr("autocomplete","off");$(this).append(d);return d};
function editable(a,d,c){c=$.extend({indicator:"Ukl\u00e1dam...",tooltip:"Klikni pro \u00fapravu",ajaxoptions:{dataType:"json"},callback:function(b){if(b.error){var c=a.attr("title");a.attr("title",null);a.popover("destroy");a.popover({animation:!0,title:"Chyba",placement:"bottom",content:b.error});a.html(b.original);a.click();a.attr("title",c)}else a.popover("destroy"),a.html(b.value)}},c);a.editable(d,c)}
$(document).ready(function(){$(".editable").each(function(){var a=$(this),d="undefined"!=typeof a.data("editable-buttons"),c=a.data("editable-data"),b=a.data("editable-type")||"text";!c&&"textarea"==b&&(c=function(a){return a.replace(/\s*<br[\s\/]?>\s*/gi,"\n")});editable(a,a.closest("[data-editable-action]").attr("data-editable-action"),{type:b,data:c,name:a.data("editable-name"),submitdata:{id:a.closest("[data-editable-id]").data("editable-id")},submit:d?'<button type="submit" class="btn btn-success">Ulo\u017eit</button>':
null,cancel:d?'<button class="btn btn-danger">Zru\u0161it</button>':null})})});$(function(){$.nette.ext("history").cache=!1;$.nette.init()});$(function(){var a;$("#video-search input").keyup(function(d){var c=$(this);clearInterval(a);a=setTimeout(function(){c.addClass("loading");$.nette.ajax({},c.closest("form"),d).done(function(){c.removeClass("loading")})},100)})});
$(document).ready(function(){$("[data-map-location]").each(function(){var a=$(this),d=new google.maps.Geocoder,c=new google.maps.Map(this,{zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP});d.geocode({address:a.attr("data-map-location")},function(b,d){d==google.maps.GeocoderStatus.OK?(c.setCenter(b[0].geometry.location),new google.maps.Marker({map:c,position:b[0].geometry.location,icon:a.attr("data-map-marker")?a.attr("data-map-marker"):null})):a.fadeOut()})})});
$(document).on("click","[data-confirm]",function(){return confirm($(this).data("confirm"))});$(document).on("mouseenter",".video img",function(){var a=$(this).parent(),d=setInterval(function(){var c=a.find("img:visible"),b=c.next("img").length?c.next("img"):c.parent().find("img").first();c.hide();b.show()},350);$(this).mouseleave(function(){clearInterval(d);a.find("img").hide();a.find("img:first").show()})});
