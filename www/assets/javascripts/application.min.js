/*
 MIT
*/
(function(b,a){if("function"!=typeof b)return console.error("nette.ajax.js: jQuery is missing, load it please");b.nette=new (b.extend(function(){var d={self:this,initialized:!1,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var c=!0,e=Array.prototype.slice.call(arguments),f=e.shift(),g="string"==typeof f?f:f.name,h="object"==typeof f?f.off||{}:{};e.push(d.self);b.each(d.on[g],function(f,g){if(g===a||-1!==b.inArray(f,h))return!0;var m=
g.apply(d.contexts[f],e);return c=m===a||m});return c},requestHandler:function(c){d.self.ajax({},this,c)},ext:function(c,e,f){for(;!f;)f="ext_"+Math.random(),d.contexts[f]&&(f=a);b.each(c,function(c,a){d.on[c][f]=a});d.contexts[f]=b.extend(e?e:{},{name:function(){return f},ext:function(c,a){var b=d.contexts[c];if(!b&&a)throw"Extension '"+this.name()+"' depends on disabled extension '"+c+"'.";return b}})}};this.ext=function(c,e,f){if("object"==typeof c)d.ext(c,e);else{if(e===a)return d.contexts[c];
if(e){if("string"==typeof c&&d.contexts[c]!==a)throw"Cannot override already registered nette-ajax extension.";d.ext(e,f,c)}else b.each("init load before start success complete error".split(" "),function(b,e){d.on[e][c]=a}),d.contexts[c]=a}return this};this.init=function(c,b){if(d.initialized)throw"Cannot initialize nette-ajax twice.";if("function"==typeof c)this.ext("init",null),this.ext("init",{load:c},b);else if("object"==typeof c)this.ext("init",null),this.ext("init",c,b);else if(c!==a)throw"Argument of init() can be function or function-hash only.";
d.initialized=!0;d.fire("init");this.load();return this};this.load=function(){d.fire("load",d.requestHandler);return this};this.ajax=function(c,e,f){if(!c.nette&&e&&f){var g=b(e),h,f=c.nette={e:f,ui:e,el:g,isForm:g.is("form"),isSubmit:g.is("input[type=submit]"),isImage:g.is("input[type=image]"),form:null};f.isSubmit||f.isImage?f.form=f.el.closest("form"):f.isForm&&(f.form=f.el);c.url||(c.url=f.form?f.form.attr("action"):e.href);c.type||(c.type=f.form?f.form.attr("method"):"get");g.is("[data-ajax-off]")&&
(c.off=g.data("ajaxOff"),"string"==typeof c.off&&(c.off=[c.off]))}d.fire({name:"prepare",off:c.off||{}},c);c.prepare&&c.prepare(c);h=c.beforeSend;c.beforeSend=function(c,b){if(h){var e=h(c,b);if(e!==a&&!e)return e}return d.fire({name:"before",off:b.off||{}},c,b)};if(e=b.ajax(c))e.done(function(a,b,e){d.fire({name:"success",off:c.off||{}},a,b,e)}).fail(function(a,b,e){d.fire({name:"error",off:c.off||{}},a,b,e)}).always(function(a,b){d.fire({name:"complete",off:c.off||{}},a,b)}),d.fire({name:"start",
off:c.off||{}},e,c),c.start&&c.start(e,c);return e}},b.nette?b.nette:{}));b.fn.netteAjax=function(a,c){return b.nette.ajax(c||{},this[0],a)};b.nette.ext("validation",{before:function(d,c){if(c.nette)var e=c.nette;else return!0;var f=e.e,g=b.extend({keys:!0,url:!0,form:!0},c.validate||function(){if(e.el.is("[data-ajax-validate]")){var c=e.el.data("ajaxValidate");if(!1===c)return{keys:!1,url:!1,form:!1};if("object"==typeof c)return c}}()||{}),h=!1;e.el.attr("data-ajax-pass")!==a&&(h=e.el.data("ajaxPass"),
h="bool"==typeof h?h:!0);if(g.keys){var j=f.button||f.ctrlKey||f.shiftKey||f.altKey||f.metaKey;if(e.form){if(j&&e.isSubmit)return this.explicitNoAjax=!0,!1;if(e.isForm&&this.explicitNoAjax)return this.explicitNoAjax=!1}else if(j)return!1}if(g.form&&e.form&&!((e.isSubmit||e.isImage)&&e.el.attr("formnovalidate")!==a)&&e.form.get(0).onsubmit&&!e.form.get(0).onsubmit())return f.stopImmediatePropagation(),f.preventDefault(),!1;if(g.url&&/:|^#/.test(e.form?c.url:e.el.attr("href")))return!1;h||(f.stopPropagation(),
f.preventDefault());return!0}},{explicitNoAjax:!1});b.nette.ext("state",{prepare:function(a){this.state&&("string"==typeof a.data?a.data+="&"+b.param(this.state):"object"==typeof a.data?a.data=b.extend(a.data||{},this.state):a.data||(a.data=this.state))},success:function(a){a.state&&(this.state=a.state)}},{state:null});b.nette.ext("forms",{success:function(a){var c;if(window.Nette&&a.snippets&&(c=this.ext("snippets")))for(var b in a.snippets)c.getElement(b).find("form").each(function(){window.Nette.initForm(this)})},
prepare:function(a){var c=a.nette;if(c&&c.form){var e=c.e,f=a.data||{},g={};if(c.isSubmit)g[c.el.attr("name")]=c.el.val()||"";else if(c.isImage){var h=c.el.offset(),j=c.el.attr("name"),e=[Math.max(0,e.pageX-h.left),Math.max(0,e.pageY-h.top)];-1!==j.indexOf("[",0)?g[j]=e:(g[j+".x"]=e[0],g[j+".y"]=e[1])}"string"!=typeof f&&(f=b.param(f));g=b.param(g);a.data=c.form.serialize()+(g?"&"+g:"")+"&"+f}}});b.nette.ext("snippets",{success:function(a){if(a.snippets)for(var c in a.snippets)this.updateSnippet(c,
a.snippets[c])}},{updateSnippet:function(a,c,b){a=this.getElement(a);"TITLE"==a.eq(0).tagName?document.title=c:this.applySnippet(a,c,b)},getElement:function(a){return b("#"+this.escapeSelector(a))},applySnippet:function(a,c,b){!b&&a.is("[data-ajax-append]")?a.append(c):a.html(c)},escapeSelector:function(a){return a.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}});b.nette.ext("redirect",{success:function(a){if(a.redirect)return window.location.href=a.redirect,!1}});b.nette.ext("unique",
{start:function(a){this.xhr&&this.xhr.abort();this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});b.nette.ext("abort",{init:function(){b("body").keydown(b.proxy(function(a){this.xhr&&(27==a.keyCode&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey)&&this.xhr.abort()},this))},start:function(a){this.xhr=a},complete:function(){this.xhr=null}},{xhr:null});b.nette.ext("init",{load:function(a){b(this.linkSelector).off("click.nette",a).on("click.nette",a);var c=b(this.formSelector);c.off("submit.nette",
a).on("submit.nette",a);c.off("click.nette",":image",a).on("click.nette",":image",a);c.off("click.nette",":submit",a).on("click.nette",":submit",a);var e=this.buttonSelector;b(e).each(function(){b(this).closest("form").off("click.nette",e,a).on("click.nette",e,a)})},success:function(){b.nette.load()}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], input.ajax[type="image"]'})})(window.jQuery);(function(b){b.nette.ext("diagnostics.dumps",{success:function(a){if(a.netteDumps&&0!=a.netteDumps.length){var d=this.getPanel(),c=b("<div>");b(this.getTitle(++this.counter)).appendTo(d);b.each(a.netteDumps,function(a,d){d.title&&b("<h2>",{text:d.title}).appendTo(c);var g=b("<table>").appendTo(c),a=0;b.each(d.dump,function(c,d){b("<th>");g.append(b("<tr>",{"class":a++%2?"nette-alt":"",html:"<th>"+c+"</th><td>"+d+"</td>"}))})});c.children().appendTo(d);this.notify()}}},{counter:0,getTitle:function(a){return"<h2>Ajax request #"+
a+"</h2>"},getTab:function(){this.tab||(this.tab=b("[rel=Nette-Diagnostics-DefaultBarPanel-4]"));return this.tab},getPanel:function(){this.panel||(this.panel=b("#nette-debug-panel-Nette-Diagnostics-DefaultBarPanel-4 .nette-DumpPanel"));return this.panel},notify:function(){this.notified||(b("<strong>",{text:" [ajax!]",css:{fontWeight:"bold"}}).appendTo(this.getTab()),this.notified=!0)}})})(jQuery);(function(b){b.nette.ext("scrollTo",{success:function(a){var b=this.ext("snippets",!0);if(a.snippets)for(var c in a.snippets)if(a=b.getElement(c),"TITLE"!=a.eq(0).tagName){b=a.offset();scrollTo(b.left,b.top);break}}})})(jQuery);(function(b){if(window.history&&history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)){b.nette.ext("redirect",!1);var a=function(){var a=[];b('[id^="snippet--"]').each(function(){var e=b(this);a.push({id:e.attr("id"),html:e.html()})});return a},d=function(a,b,d){(b=a["handle"+b.substring(0,1).toUpperCase()+b.substring(1)])&&b.apply(a,d)};b.nette.ext("history",{init:function(){var c=this.stateExt=this.ext("state",!0),e=
this.ext("snippets");this.cache&&e&&(this.handleUI=function(a){b.each(a,function(){e.updateSnippet(this.id,this.html,!0)});b.nette.load()});history.replaceState(this.initialState={nette:!0,href:window.location.href,state:{},title:document.title,ui:a()},document.title,window.location.href);b(window).on("popstate.nette",b.proxy(function(a){var e=a.originalEvent.state||this.initialState;!window.history.ready&&(e&&e.nette)&&(this.cache&&e.ui?(d(this,"UI",[e.ui]),d(this,"title",[e.title]),d(this,"state",
[e.state])):b.nette.ajax({url:e.href,off:["history","state"]}).done(function(a){a.state&&(c.state=e)}))},this))},before:function(a,b){this.href=b.nette?b.nette.form?"get"==b.nette.form.method?b.nette.ui.action||window.location.href:null:b.nette.ui.href:null},success:function(c){var b=c.redirect||c.url;if(b){var d=RegExp("//"+window.location.host+"($|/)");("http"===b.substring(0,4)?d.test(b):1)?this.href=b:window.location.href=b}if((!c.signal||b)&&this.href&&this.href!=window.location.href)history.pushState({nette:!0,
href:this.href,state:c.state||null,title:document.title,ui:a()},document.title,this.href);this.href=null}},{href:null,cache:!0,handleTitle:function(a){document.title=a},handleState:function(a){this.stateExt.state=a}})}})(jQuery);(function(b){b.fn.editable=function(a,d){if("disable"==a)b(this).data("disabled.editable",!0);else if("enable"==a)b(this).data("disabled.editable",!1);else if("destroy"==a)b(this).unbind(b(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var c=b.extend({},b.fn.editable.defaults,{target:a},d),e=b.editable.types[c.type].plugin||function(){},f=b.editable.types[c.type].submit||function(){},g=b.editable.types[c.type].buttons||b.editable.types.defaults.buttons,
h=b.editable.types[c.type].content||b.editable.types.defaults.content,j=b.editable.types[c.type].element||b.editable.types.defaults.element,q=b.editable.types[c.type].reset||b.editable.types.defaults.reset,m=c.callback||function(){},r=c.onedit||function(){},s=c.onsubmit||function(){},t=c.onreset||function(){},u=c.onerror||q;c.tooltip&&b(this).attr("title",c.tooltip);c.autowidth="auto"==c.width;c.autoheight="auto"==c.height;return this.each(function(){var a=this,d=b(a).width(),v=b(a).height();b(this).data("event.editable",
c.event);b.trim(b(this).html())||b(this).html(c.placeholder);b(this).bind(c.event,function(l){if(!0!==b(this).data("disabled.editable")&&!a.editing&&!1!==r.apply(this,[c,a])){l.preventDefault();l.stopPropagation();c.tooltip&&b(a).removeAttr("title");0==b(a).width()?(c.width=d,c.height=v):("none"!=c.width&&(c.width=c.autowidth?b(a).width():c.width),"none"!=c.height&&(c.height=c.autoheight?b(a).height():c.height));b(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==c.placeholder.toLowerCase().replace(/(;|"|\/)/g,
"")&&b(this).html("");a.editing=!0;a.revert=b(a).html();b(a).html("");var i=b("<form />");c.cssclass&&("inherit"==c.cssclass?i.attr("class",b(a).attr("class")):i.attr("class",c.cssclass));c.style&&("inherit"==c.style?(i.attr("style",b(a).attr("style")),i.css("display",b(a).css("display"))):i.attr("style",c.style));var k=j.apply(i,[c,a]),n;if(c.loadurl){var p=setTimeout(function(){k.disabled=!0;h.apply(i,[c.loadtext,c,a])},100),l={};l[c.id]=a.id;b.isFunction(c.loaddata)?b.extend(l,c.loaddata.apply(a,
[a.revert,c])):b.extend(l,c.loaddata);b.ajax({type:c.loadtype,url:c.loadurl,data:l,async:!1,success:function(a){window.clearTimeout(p);n=a;k.disabled=!1}})}else c.data?(n=c.data,b.isFunction(c.data)&&(n=c.data.apply(a,[a.revert,c]))):n=a.revert;h.apply(i,[n,c,a]);k.attr("name",c.name);g.apply(i,[c,a]);b(a).append(i);e.apply(i,[c,a]);b(":input:visible:enabled:first",i).focus();c.select&&k.select();k.keydown(function(b){27==b.keyCode&&(b.preventDefault(),q.apply(i,[c,a]))});"cancel"==c.onblur?k.blur(function(){p=
setTimeout(function(){q.apply(i,[c,a])},500)}):"submit"==c.onblur?k.blur(function(){p=setTimeout(function(){i.submit()},200)}):b.isFunction(c.onblur)?k.blur(function(){c.onblur.apply(a,[k.val(),c])}):k.blur(function(){});i.submit(function(d){p&&clearTimeout(p);d.preventDefault();if(!1!==s.apply(i,[c,a])&&!1!==f.apply(i,[c,a]))if(b.isFunction(c.target))d=c.target.apply(a,[k.val(),c]),b(a).html(d),a.editing=!1,m.apply(a,[a.innerHTML,c]),b.trim(b(a).html())||b(a).html(c.placeholder);else{d={};d[c.name]=
k.val();d[c.id]=a.id;b.isFunction(c.submitdata)?b.extend(d,c.submitdata.apply(a,[a.revert,c])):b.extend(d,c.submitdata);"PUT"==c.method&&(d._method="put");b(a).html(c.indicator);var e={type:"POST",data:d,dataType:"html",url:c.target,success:function(d){"html"==e.dataType&&b(a).html(d);a.editing=!1;m.apply(a,[d,c]);b.trim(b(a).html())||b(a).html(c.placeholder)},error:function(b){u.apply(i,[c,a,b])}};b.extend(e,c.ajaxoptions);b.ajax(e)}b(a).attr("title",c.tooltip);return!1})}});this.reset=function(d){this.editing&&
!1!==t.apply(d,[c,a])&&(b(a).html(a.revert),a.editing=!1,b.trim(b(a).html())||b(a).html(c.placeholder),c.tooltip&&b(a).attr("title",c.tooltip))}})}};b.editable={types:{defaults:{element:function(){var a=b('<input type="hidden"></input>');b(this).append(a);return a},content:function(a){b(":input:first",this).val(a)},reset:function(a,b){b.reset(this)},buttons:function(a,d){var c=this;if(a.submit){if(a.submit.match(/>$/))var e=b(a.submit).click(function(){"submit"!=e.attr("type")&&c.submit()});else e=
b('<button type="submit" />'),e.html(a.submit);b(this).append(e)}if(a.cancel){if(a.cancel.match(/>$/))var f=b(a.cancel);else f=b('<button type="cancel" />'),f.html(a.cancel);b(this).append(f);b(f).click(function(){(b.isFunction(b.editable.types[a.type].reset)?b.editable.types[a.type].reset:b.editable.types.defaults.reset).apply(c,[a,d]);return!1})}}},text:{element:function(a){var d=b("<input />");"none"!=a.width&&d.attr("width",a.width);"none"!=a.height&&d.attr("height",a.height);d.attr("autocomplete",
"off");b(this).append(d);return d}},textarea:{element:function(a){var d=b("<textarea />");a.rows?d.attr("rows",a.rows):"none"!=a.height&&d.height(a.height);a.cols?d.attr("cols",a.cols):"none"!=a.width&&d.width(a.width);b(this).append(d);return d}},select:{element:function(){var a=b("<select />");b(this).append(a);return a},content:function(a,d,c){if(String==a.constructor)eval("var json = "+a);else var e=a;for(var f in e)e.hasOwnProperty(f)&&"selected"!=f&&(a=b("<option />").val(f).append(e[f]),b("select",
this).append(a));b("select",this).children().each(function(){(b(this).val()==e.selected||b(this).text()==b.trim(c.revert))&&b(this).attr("selected","selected")});if(!d.submit){var g=this;b("select",this).change(function(){g.submit()})}}}},addInputType:function(a,d){b.editable.types[a]=d}};b.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},
ajaxoptions:{}}})(jQuery);(function(b){b.fn.autoGrowInput=function(a){a=b.extend({maxWidth:1E3,minWidth:0,comfortZone:70},a);this.filter("input:text").each(function(){var d=a.minWidth||b(this).width(),c="",e=b(this),f=b("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"});f.insertAfter(e);b(this).bind("keyup keydown blur update",function(){if(c!==(c=e.val())){var b=
c.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");f.html(b);var b=f.width(),b=b+a.comfortZone>=d?b+a.comfortZone:d,h=e.width();(b<h&&b>=d||b>d&&b<a.maxWidth)&&e.width(b)}})});return this}})(jQuery);(function(b,a,d){function c(c,f){function g(a){b(h).each(function(){var c=b(this);this!==a.target&&!c.has(a.target).length&&c.triggerHandler(f,[a.target])})}var f=f||c+d,h=b(),j=c+"."+f+"-special-event";b.event.special[f]={setup:function(){h=h.add(this);1===h.length&&b(a).bind(j,g)},teardown:function(){h=h.not(this);0===h.length&&b(a).unbind(j)},add:function(a){var c=a.handler;a.handler=function(a,b){a.target=b;c.apply(this,arguments)}}}}"$:nomunge";b.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),
function(a){c(a)});c("focusin","focus"+d);c("focusout","blur"+d);b.addOutsideEvent=c})(jQuery,document,"outside");(function(b){b.widget("ui.tagit",{options:{tagSource:[],triggerKeys:[],initialTags:[],minLength:1,select:!1,allowNewTags:!0,caseSensitive:!1,sortable:!1,highlightOnExistColor:"#0F0",emptySearch:!0,tagsChanged:function(){},maxTags:void 0,blurOnPaste:!0,editOnClick:!1,callbackOnInitialTagAdd:!1,extraOutsideEvents:[]},_splitAt:/\ |,/g,_existingAtIndex:0,_keys:{backspace:[8],enter:[13],space:[32],comma:[44,188],tab:[9],semicolon:[186,59]},_sortable:{sorting:-1},_outsideEvents:["clickoutside"],_handlingEditTag:!1,
_handleEditTag:function(a){this._handlingEditTag=!0;var b=a.width(),c=a.index(),e=this.tags()[c].label,f=this.element.find("li.tagit-new");a.before(f).remove();this.input.val(e).data().editing=!0;setTimeout(function(){f.find("input").focus().val(e)},400);clearTimeout(this.timer);this.input.width(b);this.input.autoGrowInput({comfortZone:10});this._handlingEditTag=!1},_handleUpdateEditedTag:function(a){this.input.data().editing=!1;var d=this.element.children("li").last();d.is(this.input.parent())?(a.element.insertBefore(this.input.parent()),
a.index-=1,this.tagsArray[a.index]=a,this._popSelect(b(this.tagsArray).last()[0])):(a.index=this.input.parent().index(),a.element.insertBefore(this.input.parent()),this.input.parent().insertAfter(d),this.input.focus(),this.tagsArray[a.index]=a,this._popSelect(a))},_handleDuplicateEditedTag:function(a){this._popTag(a);a=this.element.children("li").last();a.is(this.input.parent())||(this.input.parent().insertAfter(a),this.input.focus());this.input.data().editing=!1},_handleBlurOnEditingEmptyTag:function(){this._popTagAtIndex(this.input.parent().index());
var a=this.element.children("li").last();this.input.parent().is(a)||this.input.parent().insertAfter(a);this.input.focus();this.input.data().editing=!1},_initPasteSplitter:function(){var a=[];0<=b.inArray("space",this.options.triggerKeys)&&a.push(" ");0<=b.inArray("comma",this.options.triggerKeys)&&a.push(",");0<=b.inArray("semicolon",this.options.triggerKeys)&&a.push(";");this._splitAt=RegExp(a.join("|"))},_create:function(){0===this.options.triggerKeys.length&&(this.options.triggerKeys=["enter",
"space","comma","tab"]);var a=this;this.tagsArray=[];this.timer=null;this.element.addClass("tagit");this.element.children("li").each(function(){var c=b(this),d=c.attr("tagValue")||c.data("value");a.options.initialTags.push({label:c.text(),value:d?d:c.text()})});this._initPasteSplitter();this.element.html('<li class="tagit-new"><input class="tagit-input" type="text" /></li>');this.input=this.element.find(".tagit-input");this.input.autoGrowInput({comfortZone:10});b(this.element).click(function(c){b(c.target).hasClass("tagit-close")?
(c=b(c.target).parent(),c=a.tagsArray[c.index()],c.element.remove(),a._popTag(c)):(a.input.focus(),a.options.emptySearch&&b(c.target).hasClass("tagit-input")&&""==a.input.val()&&void 0!=a.input.autocomplete?a.input.autocomplete("search"):a.options.editOnClick&&b(c.target).hasClass("tagit-text")&&(a.input.data().editing&&a._addTag(a.input.val()),a._handleEditTag(b(c.target).parents(".tagit-choice"))));return!1});var d=this.options.select;this.options.appendTo=this.element;this.options.source=this.options.tagSource;
this.options.select=function(c,b){a.input.data("autoCompleteTag",!0);clearTimeout(a.timer);void 0!==a.options.maxTags&&a.tagsArray.length==a.options.maxTags?a.input.val(""):void 0===b.item.label?a._addTag(b.item.value):a._addTag(b.item.label,b.item.value);return!1};this.options.focus=function(c,b){if(void 0!==b.item.label&&/^key/.test(c.originalEvent.originalEvent.type))return a.input.val(b.item.label),a.input.data("value",b.item.value),!1};this.options.autoFocus=!this.options.allowNewTags;this.input.autocomplete(this.options);
this.options.select=d;this.input.keydown(function(c){if(!c.shiftKey){var d=a.element.children(".tagit-choice:last");if(c.which==a._keys.backspace)return a._backspace(d);if(a._isInitKey(c.which)&&(!a._isTabKey(c.which)||""!=this.value||a.input.data("autoCompleteTag")))c.preventDefault(),a.input.data("autoCompleteTag",!1),!a.options.allowNewTags||void 0!==a.options.maxTags&&a.tagsArray.length==a.options.maxTags?a.input.val(""):a.options.allowNewTags&&b(this).val().length>=a.options.minLength&&a._addTag(b(this).val());
void 0!==a.options.maxLength&&a.input.val().length==a.options.maxLength&&c.preventDefault();d.hasClass("selected")&&d.removeClass("selected");a.lastKey=c.which}});this.input.bind("paste",function(){if(a.options.blurOnPaste){var c=b(this);a.timer=setTimeout(function(){c.trigger("clickoutside")},0)}});this.input.on(this.options.extraOutsideEvents.concat(this._outsideEvents).join(" "),function(){a.input.val()?a._addTag(a.input.val(),a.input.data("value")):a.input.data().editing&&!a.input.val()&&a._handleBlurOnEditingEmptyTag()});
String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});this.options.select&&(this.select=b('<select class="tagit-hiddenSelect" name="'+(this.element.attr("name")||this.element.data("name"))+'" multiple="multiple"></select>'),this.element.after(this.select));this._initialTags();!1!==a.options.sortable&&(d={items:".tagit-choice",containment:"parent",opacity:0.6,tolerance:"pointer",start:function(c,d){a._sortable.tag=b(d.item);a._sortable.origIndex=a._sortable.tag.index()},
update:function(){a._sortable.newIndex=a._sortable.tag.index();a._moveTag(a._sortable.origIndex,a._sortable.newIndex);if(a.options.tagsChanged){var b=a.tagsArray[a._sortable.newIndex];a.options.tagsChanged(b.value,"moved",b.element)}}},"handle"==a.options.sortable&&(d.handle="a.ui-icon",d.cursor="move"),a.element.sortable(d))},_popSelect:function(a){b("option:eq("+a.index+")",this.select).remove();this.select.change()},_addSelect:function(a){var d=b('<option selected="selected" value="'+a.valueUriEncoded()+
'">'+a.labelHtml()+"</option>");0<this.select.children().length&&a.index<this.select.children("option").length?this.select.children("option").eq(a.index).before(d):this.select.append(d);this.select.change()},_popTag:function(a){void 0===a?a=this.tagsArray.pop():this.tagsArray.splice(a.index,1);for(var b in this.tagsArray)this.tagsArray[b].index=b;this.options.select&&this._popSelect(a);this.options.tagsChanged&&this.options.tagsChanged(a.value||a.label,"popped",a)},_popTagAtIndex:function(a){this._popTag({index:a})},
_addTag:function(a,d){this.input.autocomplete("close").val("");if(this._splitAt&&0<a.search(this._splitAt))for(var c=a.split(this._splitAt),e=0;e<c.length;e++)this._addTag(c[e],d);else{a=a.replace(/,+$/,"").trim();if(""==a)return!1;c=this.tag(a,d);c.element=b('<li class="tagit-choice"'+(void 0!==d?' tagValue="'+d+'"':"")+">"+("handle"==this.options.sortable?'<a class="ui-icon ui-icon-grip-dotted-vertical" style="float:left"></a>':"")+'<span class="tagit-text">'+c.labelHtml()+'</span><a class="tagit-close">x</a></li>');
e=this._exists(a,d);if(!1!==e&&e!=this.input.parent().index())return this._highlightExisting(e),this.input.data().editing&&(c.index=this.input.parents(".tagit-new").index(),this._handleDuplicateEditedTag(c)),!1;this.input.data().editing?this._handleUpdateEditedTag(c):(c.element.insertBefore(this.input.parent()),this.tagsArray.push(c));this.input.val("");this.options.select&&this._addSelect(c);this.options.tagsChanged&&this.options.tagsChanged(c.label,"added",c.element);return!0}},_exists:function(a,
b){if(0==this.tagsArray.length)return!1;var a=this._lowerIfCaseInsensitive(a),b=this._lowerIfCaseInsensitive(b),c;for(c in this.tagsArray)if(this._lowerIfCaseInsensitive(this.tagsArray[c].label)==a)if(void 0!==b){if(this._lowerIfCaseInsensitive(this.tagsArray[c].value)==b)return c}else return c;return!1},_highlightExisting:function(a){if(void 0!==this.options.highlightOnExistColor){a=this.tagsArray[a];a.element.stop();var b=a.element.css("color");a.element.animate({color:this.options.highlightOnExistColor},
100).animate({color:b},800)}},_isInitKey:function(a){var d="",c;for(c in this._keys)-1!=b.inArray(a,this._keys[c])&&(d=c);return-1!=b.inArray(d,this.options.triggerKeys)?!0:!1},_isTabKey:function(a){return-1<b.inArray(a,this._keys.tab)},_removeTag:function(){this._popTag();this.element.children(".tagit-choice:last").remove()},_backspace:function(a){""==this.input.val()&&(this.lastKey==this._keys.backspace?(this._popTag(),a.remove(),this.lastKey=null):(a.addClass("selected"),this.lastKey=this._keys.backspace));
return!0},_initialTags:function(){var a=this,d;this.options.tagsChanged&&!this.options.callbackOnInitialTagAdd&&(d=this.options.tagsChanged,this.options.tagsChanged=null);0!=this.options.initialTags.length&&b(this.options.initialTags).each(function(b,d){"object"==typeof d?a._addTag(d.label,d.value):a._addTag(d)});this.options.callbackOnInitialTagAdd||(this.options.tagsChanged=d)},_lowerIfCaseInsensitive:function(a){return void 0===a||"string"!=typeof a||this.options.caseSensitive?a:a.toLowerCase()},
_moveTag:function(a,d){this.tagsArray.splice(d,0,this.tagsArray.splice(a,1)[0]);for(var c in this.tagsArray)this.tagsArray[c].index=c;this.options.select&&b("option:eq("+a+")",this.select).insertBefore(b("option:eq("+d+")",this.select))},tags:function(){return this.tagsArray},destroy:function(){b.Widget.prototype.destroy.apply(this,arguments);this.tagsArray=[]},reset:function(){this.element.find(".tagit-choice").remove();this.tagsArray=[];this.options.select&&(this.select.children().remove(),this.select.change());
this._initialTags();this.options.tagsChanged&&this.options.tagsChanged(null,"reset",null)},fill:function(a){void 0!==a&&(this.options.initialTags=a);this.reset()},add:function(a,b){return"object"==typeof a?this._addTag(a.label,a.value):this._addTag(a,b)},autocomplete:function(){return this.input.data("autocomplete")},tag:function(a,d,c){return{label:a,labelHtml:function(){return b("<div/>").text(a).html()},value:void 0===d?a:d,valueUriEncoded:function(){return encodeURIComponent(this.value)},element:c,
index:this.tagsArray.length}},remove:function(a,b){if(0==this.tagsArray.length)return!1;for(var a=this._lowerIfCaseInsensitive(a),b=this._lowerIfCaseInsensitive(b),c=0;c<this.tagsArray.length&&!(this._lowerIfCaseInsensitive(this.tagsArray[c].value)==b||this._lowerIfCaseInsensitive(this.tagsArray[c].label)==a);c++);return 0<=c&&c<this.tagsArray.length?(c=this.tagsArray[c],c.element.remove(),this._popTag(c),!0):!1}})})(jQuery);(function(){function b(){webkitRequestAnimationFrame(b);var e=new Uint8Array(a.frequencyBinCount);a.getByteFrequencyData(e);c.clearRect(0,0,d.width,d.height);for(var g=0;g<e.length;g++)c.fillRect(g,d.height-e[g],10,d.height),g+=10}var a,d,c;window.addEventListener("load",function(){if(e=document.getElementById("music")){var f=new webkitAudioContext;a=f.createAnalyser();f.createMediaElementSource(e).connect(a);a.connect(f.destination);e.play();d=document.getElementsByTagName("canvas")[0];d.width=1024;
d.height=255;c=d.getContext("2d");f=c.createLinearGradient(0,0,0,d.height);f.addColorStop(0,"red");f.addColorStop(0.5,"yellow");f.addColorStop(1,"green");c.fillStyle=f;b()}},!1);var e})();$.editable.types.text.element=function(b){var a=$('<input type="text" />');"none"!=b.width&&a.attr("width",b.width);"none"!=b.height&&a.attr("height",b.height);a.attr("autocomplete","off");$(this).append(a);return a};
function editable(b,a,d){d=$.extend({indicator:"Ukl\u00e1dam...",tooltip:"Klikni pro \u00fapravu",placeholder:"Klikni pro \u00fapravu",ajaxoptions:{dataType:"json"},callback:function(a){if(a.error){var d=b.attr("title");b.attr("title",null);b.popover("destroy");b.popover({animation:!0,title:"Chyba",placement:"bottom",content:a.error});b.html(a.original);b.click();b.attr("title",d)}else b.popover("destroy"),b.html(a.value)}},d);b.editable(a,d)}
$(document).ready(function(){$(".editable").each(function(){var b=$(this),a="undefined"!=typeof b.data("editable-buttons"),d=b.data("editable-data"),c=b.data("editable-type")||"text";!d&&"textarea"==c&&(d=function(a){return a.replace(/\s*<br[\s\/]?>\s*/gi,"\n")});editable(b,b.closest("[data-editable-action]").attr("data-editable-action"),{type:c,data:d,name:b.data("editable-name"),submitdata:{id:b.closest("[data-editable-id]").data("editable-id")},submit:a?'<button type="submit" class="btn btn-success">Ulo\u017eit</button>':
null,cancel:a?'<button class="btn btn-danger">Zru\u0161it</button>':null})})});$(function(){$.nette.ext("history").cache=!1;$.nette.init()});$(function(){var b;$("#video-search input").keyup(function(a){var d=$(this);clearInterval(b);b=setTimeout(function(){d.addClass("loading");$.nette.ajax({},d.closest("form"),a).done(function(){d.removeClass("loading")})},100)})});
$(document).ready(function(){$("[data-map-location]").each(function(){var b=$(this),a=new google.maps.Geocoder,d=new google.maps.Map(this,{zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP});a.geocode({address:b.attr("data-map-location")},function(a,e){e==google.maps.GeocoderStatus.OK?(d.setCenter(a[0].geometry.location),new google.maps.Marker({map:d,position:a[0].geometry.location,icon:b.attr("data-map-marker")?b.attr("data-map-marker"):null})):b.fadeOut()})})});
$(document).on("click","[data-confirm]",function(){return confirm($(this).data("confirm"))});$(document).on("mouseenter",".video img",function(){var b=$(this).parent(),a=setInterval(function(){var a=b.find("img:visible"),c=a.next("img").length?a.next("img"):a.parent().find("img").first();a.hide();c.show()},350);$(this).mouseleave(function(){clearInterval(a);b.find("img").hide();b.find("img:first").show()})});
